db: sink.db
reviewer: "mailto:user@example.com"

labels:
  annotation:
    type: webannotation
    question: Annotation
    entities:
      - COMPOUND
      - DOSE
      - EXPOSURE_ROUTE
      - IN_VITRO_VIVO
      - ORGANISM
      - PARENT_VS_OFFSPRING
      - PHENOTYPE
    relationships:
      inhibits:
        - from: COMPOUND
          to: [COMPOUND, ORGANISM]
      promotes:
        - from: COMPOUND
          to: [PHENOTYPE]
  groupblOdlb:
    question: Relationships
    required: false
    json-schema: {"$id":"http://localhost:4061/web-api/srvc-json-schema?hash=QmQ4djRUAv7QmKL5KSZ3ZfvhRBBqgxcLjHyzXXf6uA4wVZ","type":"array","items":{"type":"object","srvcOrder":["stringwgdddI","categoricalLfOFUj","stringWODblq"],"properties":{"stringWODblq":{"type":"string","title":"Target","maxLength":100},"stringwgdddI":{"type":"string","title":"Source","maxLength":100},"categoricalLfOFUj":{"type":"array","items":{"enum":["inhibits","promotes"],"type":"string"},"title":"Relationship"}}},"title":"Relationships","$schema":"http://json-schema.org/draft-07/schema"}
  overall include:
    question: Include this article?
    required: true
    inclusion-values: [true]
    json-schema: boolean

flows:
  gpt-label:
    steps:
      - run-embedded: generator sink.db

      - uses: .#gpt-label
        labels: [groupblOdlb]

  import:
    steps:
      - run-embedded: generator https://pubmed-http-server.fly.dev?q=susceptibility+factor

  spacy:
    steps:
      - run-embedded: generator sink.db

      - uses: github:sysrev/srvc-hello#spacy
        labels: [annotation]
        model: "https://s3.amazonaws.com/ins.pins/spacy.zip"

  recogito:
    steps:
      - run-embedded: generator sink.db

      - run-embedded: html https://static.sysrev.com/srvc/recogito/
        labels: [annotation]

  brat:
    steps:
      - run-embedded: generator sink.db

      - run-embedded: html https://static.sysrev.com/srvc/brat/
        labels: [annotation]
